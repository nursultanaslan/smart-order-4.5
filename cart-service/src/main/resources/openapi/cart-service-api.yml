openapi: 3.0.3   #openapi spec version
info:  #api hakkında genel bilgiler saglar
  title: Cart Service Api
  description: |
    This API manage cart service operations.
  version: 1.0.0

servers:
  - url: http://localhost:8087
    description: Local development server

#apinin tüm endpointlerini açıklar
paths:
  /api/v1/carts:      #paths object
    post:             #path item object
      tags:
        - carts
      summary: Add Product to Cart
      description: Add an item to the cart
      operationId: addToCart
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/CartItemRequest'}
      responses:
        '201':
          description: "ADDED"
          content:
            application/json:
              schema: { $ref: '#/components/schemas/CartItemResponse'}

  /api/v1/carts/{customerId}:
    get:
      tags:
        - carts
      summary: Get the customer's cart
      description: Retrieves the current customer's cart state
      operationId: getCartByCustomerId
      parameters:     #parametre nesnelerini tanımla.
        - name: customerId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: "OK"
          content:
            application/json:
              schema: { $ref: '#/components/schemas/Cart'}

  /api/v1/carts/items/{productId}:
    delete:
      tags:
        - carts
      summary: Delete product from Cart
      operationId: deleteProduct
      parameters:
        - name: productId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  productId: {type: integer, format: uuid}

  /api/v1/carts/update-quantity/{productId}:
    patch:
      tags:
        - carts
      summary: Update product quantity
      description: Updates the quantity of the selected product.
      operationId: updateProductQuantity
      parameters:
        - name: productId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/UpdateQuantityRequest'}
      responses:
        '200':
          description: "OK"
          content:
            application/json:
              schema: {$ref: '#/components/schemas/CartItemResponse'}


components:
  schemas:
    CartItemRequest:
      type: object
      required: [productId, quantity]
      properties:
        productId: {type: string, format: uuid}
        quantity: {type: integer, minimum: 1 }
    CartItemResponse:
      type: object
      properties:
        productId: {type: string, format: uuid}
        quantity: { type: integer }
        unitPrice: {type: number, format: decimal}

    CartItem:
      type: object
      properties:
        productId: {type: string, format: uuid}
        quantity: {type: integer}
        unitPrice: {type: number, format: decimal}
    Cart:
      type: object
      properties:
        cartTotalPrice: {type: number, format: decimal}
        items: {type: array, minItems: 0, items: {$ref: '#/components/schemas/CartItem'} }

    UpdateQuantityRequest:
      type: object
      properties:
        quantity: { type: integer, minimum: 1 }


